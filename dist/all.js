const articleButtons=document.querySelectorAll(".article__button"),closeButton=document.querySelector("#popup-close-button"),overlay=document.querySelector(".overlay"),counterSpan=document.querySelector("#counter"),resetCounterButton=document.querySelector("#reset-counter-button"),getItemFromLS=e=>{if(window.localStorage)return localStorage.getItem(e);throw Error("Localstorage is not supported")},setItemInLS=(e,t)=>{if(!window.localStorage)throw Error("Localstorage is not supported");localStorage.setItem(e,t)},showPopup=e=>{resetCounterButton.style.visibility="hidden",resetCounterButton.innerHTML="Reset counter",overlay.style.display="flex";var t=getItemFromLS(e);t?(t=JSON.parse(t).counter,setItemInLS(e,JSON.stringify({counter:++t})),counterSpan.innerHTML=t+" times",5<t&&(resetCounterButton.style.visibility="visible",resetCounterButton.onclick=function(){setItemInLS(e,JSON.stringify({counter:0})),resetCounterButton.innerHTML="Counter reseted"})):(setItemInLS(e,JSON.stringify({counter:1})),counterSpan.innerHTML="1 time")},closePopup=()=>{overlay.style.display="none"};articleButtons.forEach(e=>e.addEventListener("click",e=>{e=e.target.id;showPopup(e)})),closeButton.addEventListener("click",closePopup),overlay.addEventListener("click",e=>{"overlay"===e.target.className&&closePopup()});